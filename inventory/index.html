<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>Inventory Manager</title>
  <link rel="manifest" href="/root/manifest.json">
  <meta name="theme-color" content="#007aff">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="Inventory">
  <link rel="apple-touch-icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMBA3+AcqQAAAAASUVORK5CYII=">
  <link rel="stylesheet" href="/root/ios.css">
  <script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-firestore-compat.js"></script>
  <style>
    .action-toggle {
      width: 100%;
      font-size: 1.5rem;
      padding: 0.75rem;
      border: none;
      border-radius: 8px;
      margin-bottom: 1rem;
      color: #fff;
    }
    .action-toggle.stock-out { background: var(--warn); }
    .action-toggle.stock-in { background: var(--success); }

    .controls {
      display: flex;
      gap: .5rem;
      margin-bottom: .75rem;
    }
    .controls input,
    .controls select {
      flex: 1;
      padding: .5rem;
    }

    .product-grid {
      display: grid;
      gap: .5rem;
    }
    @media (max-width: 600px) {
      .product-grid { grid-template-columns: repeat(3, 1fr); }
    }
    @media (min-width: 601px) {
      .product-grid { grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); }
    }

    .product-card {
      background: #fff;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      border-radius: 10px;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-bottom: .5rem;
    }
    .product-card img {
      width: 100%;
      aspect-ratio: 1 / 1;
      object-fit: cover;
    }
    .product-card h2 {
      font-size: .9rem;
      margin: .25rem 0;
      text-align: center;
    }
    .quantity-control {
      display: flex;
      align-items: center;
      gap: .25rem;
    }
    .quantity-control button {
      width: 2rem;
      height: 2rem;
      font-size: 1.25rem;
    }
    .quantity-control span {
      min-width: 1.5rem;
      text-align: center;
    }

    .buttonGroup {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      margin-top: 1rem;
    }
    .buttonGroup button { padding: 0.75rem; font-size: 1rem; }
    #submitBtn { background: var(--primary); color: #fff; }
    #clearBtn { background: var(--warn); color: #fff; }
  </style>
</head>
<body>
  <header class="app-header">
    <a href="/index.html" class="back-button">â€¹</a>
    <h1>Inventory</h1>
  </header>
  <main class="app-container">
    <form id="inventoryForm" class="panel" aria-label="Inventory Form">
      <button type="button" id="actionToggle" class="action-toggle stock-out">Stock Out</button>
      <div class="controls">
        <input type="search" id="searchInput" placeholder="Filter products...">
        <select id="typeFilter">
          <option value="">All Types</option>
        </select>
        <select id="sortSelect">
          <option value="az">Aâ€“Z</option>
          <option value="za">Zâ€“A</option>
        </select>
      </div>
      <div id="productGrid" class="product-grid" aria-live="polite"></div>
      <div class="buttonGroup">
        <button type="submit" id="submitBtn">âœ… Submit</button>
        <button type="button" id="clearBtn">ðŸ§¹ Clear</button>
      </div>
    </form>
  </main>

  <script src="./app.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      let startX = 0;
      document.addEventListener('touchstart', e => { startX = e.changedTouches[0].screenX; });
      document.addEventListener('touchend', e => {
        if (e.changedTouches[0].screenX - startX > 80) {
          if (history.length > 1) history.back(); else location.href = '/index.html';
        }
      });
    });

    if ('serviceWorker' in navigator) {
      navigator.serviceWorker
        .register('/root/sw.js', { scope: '/root/' })
        .then(() => console.log('Service Worker registered'))
        .catch(e => console.error('SW registration failed', e));
    }
  </script>
</body>
</html>
